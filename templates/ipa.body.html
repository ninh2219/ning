<script>
async function loadIPA(){
  const tbody = document.getElementById('tbody');
  try{
    // Đọc manifest RIÊNG trong thư mục /ipa/
    const res = await fetch('manifest.json?nocache=' + Date.now(), {cache: 'no-store'});
    const data = await res.json();
    const items = Array.isArray(data.items) ? data.items : [];

    if(items.length === 0){
      tbody.innerHTML = '<tr><td colspan="4"><em>Chưa có IPA.</em></td></tr>';
      return;
    }

    const rows = items.map(it => {
      const name = it.file || '';
      const mb   = it.size ? (it.size/1e6).toFixed(2) + ' MB' : '';
      const sha  = it.sha256 || '';
      const url  = it.url || it.file || '';
      return `<tr>
        <td class="text-break">${name}</td>
        <td>${mb}</td>
        <td class="text-break">${sha}</td>
        <td><a href="${url}">Download</a></td>
      </tr>`;
    });

    tbody.innerHTML = rows.join('');
  }catch(e){
    tbody.innerHTML = `<tr><td colspan="4"><em>Lỗi tải manifest: ${e.message}</em></td></tr>`;
  }
}
loadIPA();
</script>
