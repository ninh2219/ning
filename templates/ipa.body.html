<main class="container my-4">
  <h1 class="h4">IPA Downloads</h1>
  <p class="text-muted">Danh sách .ipa — <a href="manifest.json">manifest.json</a></p>
  <div class="table-responsive"><table class="table table-sm table-striped">
    <thead><tr><th>Tên file</th><th>Kích thước</th><th>SHA256</th><th>Tải</th></tr></thead>
    <tbody id="tbody"><tr><td colspan="4">Đang tải…</td></tr></tbody>
  </table></div>
</main>
<script>
async function main(){
  try{
    const res=await fetch('manifest.json',{cache:'no-store'}); const data=await res.json();
    const tbody=document.getElementById('tbody'); tbody.innerHTML='';
    if(!data.items.length){ tbody.innerHTML='<tr><td colspan="4"><em>Chưa có IPA.</em></td></tr>'; return; }
    for(const it of data.items){
      const mb = it.size ? (it.size/1e6).toFixed(2)+' MB' : '';
      const tr = document.createElement('tr');
      tr.innerHTML = `<td class="text-break">${it.file||''}</td><td>${mb}</td><td class="text-break">${it.sha256||''}</td><td><a href="${it.url||it.file}">Download</a></td>`;
      tbody.appendChild(tr);
    }
  }catch(e){ document.getElementById('tbody').innerHTML='<tr><td colspan="4"><em>Lỗi tải manifest.</em></td></tr>'; }
}
main();
</script>

